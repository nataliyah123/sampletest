{"ast":null,"code":"var _jsxFileName = \"/home/vagrant/autonomous/ibiasubs/src/component/show.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props); // State of your application\n\n    this.componentDidMount = async () => {\n      try {\n        const response = await axios.get('http://localhost:8000/categories');\n        this.setState({\n          allCategories: response.data\n        });\n      } catch (error) {\n        this.setState({\n          error\n        });\n      }\n    };\n\n    this.handleInputChange = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState(prev => ({ ...prev,\n        modifiedData: { ...prev.modifiedData,\n          [name]: value\n        }\n      }));\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n\n      try {\n        const response = await axios.post('http://localhost:1337/restaurants', this.state.modifiedData);\n        console.log(response);\n      } catch (error) {\n        this.setState({\n          error\n        });\n      }\n    };\n\n    this.renderCheckbox = category => {\n      const {\n        modifiedData: {\n          categories\n        }\n      } = this.state;\n      const isChecked = categories.includes(category.id);\n\n      const handleChange = () => {\n        if (!categories.includes(category.id)) {\n          this.handleInputChange({\n            target: {\n              name: 'categories',\n              value: categories.concat(category.id)\n            }\n          });\n        } else {\n          this.handleInputChange({\n            target: {\n              name: 'categories',\n              value: categories.filter(v => v !== category.id)\n            }\n          });\n        }\n      };\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: category.id,\n          children: category.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: isChecked,\n          onChange: handleChange,\n          name: \"categories\",\n          id: category.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, category.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.state = {\n      modifiedData: {\n        name: '',\n        description: '',\n        categories: []\n      },\n      allCategories: [],\n      error: null\n    };\n  } // Fetch your categories immediately after the component is mounted\n\n\n  render() {\n    const {\n      error,\n      allCategories,\n      modifiedData\n    } = this.state; // Print errors if any\n\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"An error occured: \", error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Restaurants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            onChange: this.handleInputChange,\n            value: modifiedData.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Description:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"description\",\n            onChange: this.handleInputChange,\n            value: modifiedData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Select categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), allCategories.map(this.renderCheckbox)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/vagrant/autonomous/ibiasubs/src/component/show.js"],"names":["React","axios","App","Component","constructor","props","componentDidMount","response","get","setState","allCategories","data","error","handleInputChange","target","name","value","prev","modifiedData","handleSubmit","e","preventDefault","post","state","console","log","renderCheckbox","category","categories","isChecked","includes","id","handleChange","concat","filter","v","description","render","message","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // State of your application\n    this.state = {\n      modifiedData: {\n        name: '',\n        description: '',\n        categories: [],\n      },\n      allCategories: [],\n      error: null,\n    };\n  }\n\n  // Fetch your categories immediately after the component is mounted\n  componentDidMount = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/categories');\n      this.setState({ allCategories: response.data });\n    } catch (error) {\n      this.setState({ error });\n    }\n  };\n\n  handleInputChange = ({ target: { name, value } }) => {\n    this.setState(prev => ({\n      ...prev,\n      modifiedData: {\n        ...prev.modifiedData,\n        [name]: value,\n      },\n    }));\n  };\n\n  handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const response = await axios.post(\n        'http://localhost:1337/restaurants',\n        this.state.modifiedData\n      );\n      console.log(response);\n    } catch (error) {\n      this.setState({ error });\n    }\n  };\n\n  renderCheckbox = category => {\n    const {\n      modifiedData: { categories },\n    } = this.state;\n    const isChecked = categories.includes(category.id);\n    const handleChange = () => {\n      if (!categories.includes(category.id)) {\n        this.handleInputChange({\n          target: { name: 'categories', value: categories.concat(category.id) },\n        });\n      } else {\n        this.handleInputChange({\n          target: {\n            name: 'categories',\n            value: categories.filter(v => v !== category.id),\n          },\n        });\n      }\n    };\n\n    return (\n      <div key={category.id}>\n        <label htmlFor={category.id}>{category.name}</label>\n        <input\n          type=\"checkbox\"\n          checked={isChecked}\n          onChange={handleChange}\n          name=\"categories\"\n          id={category.id}\n        />\n      </div>\n    );\n  };\n\n  render() {\n    const { error, allCategories, modifiedData } = this.state;\n\n    // Print errors if any\n    if (error) {\n      return <div>An error occured: {error.message}</div>;\n    }\n\n    return (\n      <div className=\"App\">\n        <form onSubmit={this.handleSubmit}>\n          <h3>Restaurants</h3>\n          <br />\n          <label>\n            Name:\n            <input\n              type=\"text\"\n              name=\"name\"\n              onChange={this.handleInputChange}\n              value={modifiedData.name}\n            />\n          </label>\n          <label>\n            Description:\n            <input\n              type=\"text\"\n              name=\"description\"\n              onChange={this.handleInputChange}\n              value={modifiedData.description}\n            />\n          </label>\n          <div>\n            <br />\n            <b>Select categories</b>\n            {allCategories.map(this.renderCheckbox)}\n          </div>\n          <br />\n          <button type=\"submit\">Submit</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}